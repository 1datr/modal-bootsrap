BootstrapMultimodal=(function($){var BASE_ZINDEX=1040;var ZINDEX_MULTIPLIER=20;var ZINDEX_MODAL=10;var NAVBAR_SELECTOR='.apply-modal-open-padding .navbar';var modalsCount=0;var $firstModal=null;function adjustBackdrops(){var modalIndex=modalsCount-1;var $firstBackdrop=$('.modal-backdrop:first');$('.modal-backdrop').not(':first').addClass('hidden');if(modalIndex==0){$firstBackdrop.css('z-index','')}else{$firstBackdrop.css('z-index',BASE_ZINDEX+(modalIndex*ZINDEX_MULTIPLIER))}}function adjustModal($modal){var modalIndex=modalsCount-1;$modal.css('z-index',BASE_ZINDEX+(modalIndex*ZINDEX_MULTIPLIER)+ZINDEX_MODAL)}function patchModalHide(modal){if(modal.__isHidePatched===true){return}modal.__isHidePatched=true;var hide=modal.hide;modal.hide=function(event){var wasShown=modal.isShown;hide.apply(modal,arguments);if(!wasShown||(wasShown&&this.isShown)){return}modalsCount--;if(modalsCount>0){adjustBackdrops()}}.bind(modal)}function patchModalAdjustDialog(modal){if(modal.__isAdjustDialogPatched===true){return}modal.__isAdjustDialogPatched=true;var firstModal=$firstModal.data('bs.modal');var bodyIsOverflowing=firstModal.bodyIsOverflowing;var scrollbarWidth=firstModal.scrollbarWidth;modal.adjustDialog=function(){var modalIsOverflowing=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!bodyIsOverflowing&&modalIsOverflowing?scrollbarWidth:'',paddingRight:bodyIsOverflowing&&!modalIsOverflowing?scrollbarWidth:''})}.bind(modal)}function patchModalBackdrop(modal){if(modal.__isBackdropPatched===true){return}modal.__isBackdropPatched=true;var backdrop=modal.backdrop;modal.backdrop=function(){backdrop.apply(modal,arguments);adjustBackdrops()}}function patchModalSetScrollbar(modal){var $navbars=$(NAVBAR_SELECTOR);var setScrollbar=modal.setScrollbar;modal.setScrollbar=function(){setScrollbar.apply(modal,arguments);if(modal.bodyIsOverflowing){$navbars.css('padding-right',modal.$body.css('padding-right'))}};var resetScrollbar=modal.resetScrollbar;modal.resetScrollbar=function(){resetScrollbar.apply(modal,arguments);$navbars.css('padding-right','')}}function patchModal($modal){var modal=$modal.data('bs.modal');patchModalHide(modal);if(modalsCount==1){patchModalSetScrollbar(modal)}else if(modalsCount>1){adjustModal($modal);patchModalAdjustDialog(modal);patchModalBackdrop(modal);modal.setScrollbar=function(){};modal.resetScrollbar=function(){if(modalsCount>0){modal.$body.addClass('modal-open')}}}}function onShow(event){if(event&&event.isDefaultPrevented()){return}var $modal=$(event.target);if($modal.data('multimodal')=='disabled'){return}modalsCount++;if(!$firstModal||modalsCount==1){$firstModal=$modal}patchModal($modal)}function onHidden(){var open_modals_count=$('.modal.show').length;if(open_modals_count==0){$('body').removeClass('modal-open')}else{$('body').addClass('modal-open')}}function enable(){$(document).on('show.bs.modal.multimodal',onShow);$(document).on('hidden.bs.modal.multimodal',onHidden)}function disable(){$(document).off('show.bs.modal.multimodal',onShow);$(document).off('hide.bs.modal.multimodal',onHide)}enable();return{disable:disable,enable:enable}}(jQuery));
